import{r as i,j as p}from"./index-C185ll5y.js";import{g as t}from"./index-CH_iu5NA.js";const ce=({targetSelector:j=".cursor-target",spinDuration:m=2,hideDefaultCursor:B=!0})=>{const e=i.useRef(null),x=i.useRef(null),o=i.useRef(null),b=i.useRef(null),H=i.useMemo(()=>({borderWidth:3,cornerSize:12,parallaxStrength:5e-5}),[]),F=i.useCallback((k,h)=>{e.current&&t.to(e.current,{x:k,y:h,duration:.1,ease:"power3.out"})},[]);return i.useEffect(()=>{if(!e.current)return;const k=document.body.style.cursor;B&&(document.body.style.cursor="none");const h=e.current;x.current=h.querySelectorAll(".target-cursor-corner");let s=null,T=null,v=null,C=!1,E=null;const A=l=>{T&&l.removeEventListener("mousemove",T),v&&l.removeEventListener("mouseleave",v),T=null,v=null};t.set(h,{xPercent:-50,yPercent:-50,x:window.innerWidth/2,y:window.innerHeight/2}),(()=>{o.current&&o.current.kill(),o.current=t.timeline({repeat:-1}).to(h,{rotation:"+=360",duration:m,ease:"none"})})();const N=l=>F(l.clientX,l.clientY);window.addEventListener("mousemove",N);const U=()=>{if(!s||!e.current)return;const l=t.getProperty(e.current,"x"),P=t.getProperty(e.current,"y"),w=document.elementFromPoint(l,P);w&&(w===s||w.closest(j)===s)||v&&v()};window.addEventListener("scroll",U,{passive:!0}),window.addEventListener("mousemove",N);const Z=()=>{b.current&&(t.to(b.current,{scale:.7,duration:.3}),t.to(e.current,{scale:.9,duration:.2}))},_=()=>{b.current&&(t.to(b.current,{scale:1,duration:.3}),t.to(e.current,{scale:1,duration:.2}))};window.addEventListener("mousedown",Z),window.addEventListener("mouseup",_);const G=l=>{const P=l.target,w=[];let u=P;for(;u&&u!==document.body;)u.matches(j)&&w.push(u),u=u.parentElement;const d=w[0]||null;if(!d||!e.current||!x.current||s===d)return;s&&A(s),E&&(clearTimeout(E),E=null),s=d,t.killTweensOf(e.current,"rotation"),o.current?.pause(),t.set(e.current,{rotation:0});const I=(c,r)=>{const n=d.getBoundingClientRect(),y=e.current.getBoundingClientRect(),g=y.left+y.width/2,f=y.top+y.height/2,[$,D,ee,te]=Array.from(x.current),{borderWidth:a,cornerSize:L,parallaxStrength:Q}=H;let X={x:n.left-g-a,y:n.top-f-a},Y={x:n.right-g+a-L,y:n.top-f-a},M={x:n.right-g+a-L,y:n.bottom-f+a-L},W={x:n.left-g-a,y:n.bottom-f+a-L};if(c!==void 0&&r!==void 0){const q=n.left+n.width/2,R=n.top+n.height/2,O=(c-q)*Q,S=(r-R)*Q;X.x+=O,X.y+=S,Y.x+=O,Y.y+=S,M.x+=O,M.y+=S,W.x+=O,W.y+=S}const re=t.timeline(),ne=[$,D,ee,te],V=[X,Y,M,W];ne.forEach((q,R)=>{re.to(q,{x:V[R].x,y:V[R].y,duration:.2,ease:"power2.out"},0)})};C=!0,I(),setTimeout(()=>{C=!1},1);let z=null;const J=c=>{z||C||(z=requestAnimationFrame(()=>{const r=c;I(r.clientX,r.clientY),z=null}))},K=()=>{if(s=null,C=!1,x.current){const c=Array.from(x.current);t.killTweensOf(c);const{cornerSize:r}=H,n=[{x:-r*1.5,y:-r*1.5},{x:r*.5,y:-r*1.5},{x:r*.5,y:r*.5},{x:-r*1.5,y:r*.5}],y=t.timeline();c.forEach((g,f)=>{y.to(g,{x:n[f].x,y:n[f].y,duration:.3,ease:"power3.out"},0)})}E=setTimeout(()=>{if(!s&&e.current&&o.current){const r=t.getProperty(e.current,"rotation")%360;o.current.kill(),o.current=t.timeline({repeat:-1}).to(e.current,{rotation:"+=360",duration:m,ease:"none"}),t.to(e.current,{rotation:r+360,duration:m*(1-r/360),ease:"none",onComplete:()=>{o.current?.restart()}})}E=null},50),A(d)};T=J,v=K,d.addEventListener("mousemove",J),d.addEventListener("mouseleave",K)};return window.addEventListener("mouseover",G,{passive:!0}),()=>{window.removeEventListener("mousemove",N),window.removeEventListener("mouseover",G),window.removeEventListener("scroll",U),s&&A(s),o.current?.kill(),document.body.style.cursor=k}},[j,m,F,H,B]),i.useEffect(()=>{!e.current||!o.current||o.current.isActive()&&(o.current.kill(),o.current=t.timeline({repeat:-1}).to(e.current,{rotation:"+=360",duration:m,ease:"none"}))},[m]),p.jsxs("div",{ref:e,className:"fixed top-0 left-0 w-0 h-0 pointer-events-none z-[9999] mix-blend-difference transform -translate-x-1/2 -translate-y-1/2",style:{willChange:"transform"},children:[p.jsx("div",{ref:b,className:"absolute left-1/2 top-1/2 w-1 h-1 bg-white rounded-full transform -translate-x-1/2 -translate-y-1/2",style:{willChange:"transform"}}),p.jsx("div",{className:"target-cursor-corner absolute left-1/2 top-1/2 w-3 h-3 border-[3px] border-white transform -translate-x-[150%] -translate-y-[150%] border-r-0 border-b-0",style:{willChange:"transform"}}),p.jsx("div",{className:"target-cursor-corner absolute left-1/2 top-1/2 w-3 h-3 border-[3px] border-white transform translate-x-1/2 -translate-y-[150%] border-l-0 border-b-0",style:{willChange:"transform"}}),p.jsx("div",{className:"target-cursor-corner absolute left-1/2 top-1/2 w-3 h-3 border-[3px] border-white transform translate-x-1/2 translate-y-1/2 border-l-0 border-t-0",style:{willChange:"transform"}}),p.jsx("div",{className:"target-cursor-corner absolute left-1/2 top-1/2 w-3 h-3 border-[3px] border-white transform -translate-x-[150%] translate-y-1/2 border-r-0 border-t-0",style:{willChange:"transform"}})]})};export{ce as default};
